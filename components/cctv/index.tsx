"use client"
import { useEffect, useState } from 'react'
import useMousePosition from './hook'
import { MoveCctv } from './helper'


export interface CctvProps {

}


export const Cctv = ({ }: CctvProps) => {
    const { x, y } = useMousePosition(0, 0)
    const [rotateCamera, setRotateCamera] = useState(MoveCctv(0))

    useEffect(() => {
        if(x > 125 || (x < 125 && y > 125)) {
            const n = Math.floor(Math.atan(y / x) * (180 / Math.PI)) || 1

            setTimeout(() => {
                setRotateCamera(MoveCctv(n))
            }, 100);
        }
    },[x, y])


    return (
        <svg width="200" height="200" version="1.1" viewBox="0 0 40 40" xmlSpace="preserve"
            xmlns="http://www.w3.org/2000/svg">
            <g transform="matrix(.090694 0 0 .090694 35.257 13.255)">
                <path transform="scale(.26458)"
                    d="m-1257.6 240.37-33.528-0.11018v-67.682h43.234c23.778 0 52.057-0.12539 62.842-0.27865l19.608-0.27865-1.4007 3.3266c-0.7704 1.8297-2.1905 5.6259-3.1559 8.4362-4.8054 13.989-5.0087 20.861-1.108 37.466 1.3341 5.6788 4.3828 16.924 5.0697 18.7 0.2696 0.69696-1.2521 0.73033-28.874 0.63318-16.037-0.0564-44.246-0.15213-62.687-0.21272z"
                    fill="#f9fbfa" />
                <path
                    d="m-362.91 65.204c-0.0576-7.2958-0.10475-17.966-0.10475-23.712v-10.447l6.489 0.10303c3.5689 0.05667 6.9138 0.17157 7.4329 0.25534 2.364 0.38148 4.5786 1.4476 5.7772 2.7812 0.67059 0.74615 1.4691 2.2645 2.0685 3.9334l0.41304 1.1499v30.44l-0.36811 0.93436c-1.5967 4.0528-3.0031 5.4767-6.9618 7.0484l-1.4308 0.56807-13.21 0.21115z"
                    fill="#b3b3b3" />
                <rect x="-387.53" y="11.535" width="25.277" height="86.355" ry="5.5557" fill="#f9fbfa" />
                <g transform="translate(2.2222 -3.002)">
                    <path
                        d="m-295.34 80.151c-14.24-3.8293-21.578-19.835-15.226-33.21 4.8563-10.226 16.3-15.604 27.176-12.771 14.451 3.7639 21.857 19.736 15.429 33.272-4.8401 10.192-16.541 15.624-27.379 12.709z"
                        fill="#d6d6d6" />
                    <circle cx="-289.25" cy="57.199" r="14.78" fill="#aeaeae" />
                </g>
                <g transform={rotateCamera}>
                    <path
                        d="m-229.69-53.589s-6.6618-0.35474-9.4769-1.5713-7.0578-5.3732-7.0578-5.3732l-25.279 57.977s6.4729 0.56459 9.2627 1.7885c2.8121 1.2337 7.1368 5.4236 7.1368 5.4236z"
                        fill="#f9fbfa" />
                    <path
                        d="m-252.37-82.766 47.652 11.232c-1.3958 4.5044-3.9989 8.6286-7.4648 11.826-3.4658 3.1978-7.7857 5.4614-12.388 6.491-1.319 0.29511-2.6609 0.49082-4.0103 0.56953-7.485 0.43664-15.093-2.9791-19.74-8.8629-4.6473-5.8838-6.2078-14.076-4.0492-21.256z"
                        fill="#d6d6d6" />
                    <path
                        d="m-304.85-94.625c0.19358 0.0591-3.4059-0.92188-5.4591-5.0663-2.0533-4.1445 0.16463-10.291 0.59651-11.753 0.43191-1.4626 14.391-63.076 14.391-63.076s1.1677-3.0434 4.4494-5.2042c3.2817-2.1608 7.2352-0.91186 8.1541-0.72942s158.32 36.461 158.32 36.461l-19.725 86.89z"
                        fill="#f3f3f3" />
                    <path d="m-101.11-127-26.133-5.4397-14.385 63.492 25.561 6.2293z" fill="#b3b3b3" />
                    <path d="m-84.156-107.82-20.639-4.7385-7.9045 35.097 20.176 4.6541z" fill="#4c4c4c" />
                </g>
            </g>
        </svg>
    )
}
